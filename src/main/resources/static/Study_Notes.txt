ğŸ“’ Spring Security â€“ Quick Revision Notes (Organized)
âœ… 1. Basics

@Configuration â†’ Security config class define karne ke liye

@EnableMethodSecurity(securedEnabled = true) â†’ method-level security enable

Enable karta hai â†’ @Secured, @PreAuthorize, @PostAuthorize

âš¡ Isko SecurityConfig class par lagate hain (jo @Configuration hoti hai aur SecurityFilterChain define karti hai)

âœ… 2. Users & Roles

UserDetailsService â†’ Spring Security ko user info provide karta hai

InMemoryUserDetailsManager â†’ memory-based user storage (DB ke bina)

Example user create:

User.withUsername("name")
    .password(encoder.encode("pass"))
    .roles("ROLE")
    .build();

âœ… 3. Password

PasswordEncoder compulsory (raw password allowed nahi)

Recommended â†’ BCryptPasswordEncoder (secure hashing)

âœ… 4. SecurityFilterChain
ğŸ”¹ Important configs

csrf.disable() â†’ learning me theek, production me enable karna zaroori

authorizeHttpRequests() â†’ kis URL ko allow/deny karna hai

ğŸ”¹ formLogin() fields

loginPage("/login") â†’ custom login page (GET request)

loginProcessingUrl("/doLogin") â†’ form POST submit yaha hoga (Spring handle karega)

defaultSuccessUrl("/success", true) â†’ login ke baad redirect

true â†’ hamesha /success par hi redirect

failureUrl("/login?error=true") â†’ login fail par redirect

permitAll() â†’ login related pages sab access kar sakte hain

ğŸ”¹ exceptionHandling()

accessDeniedPage("/unauthorized") â†’ agar role/authority match nahi karta to redirect

âœ… 5. Default Login Flow

User /login page open karega

Form POST karega â†’ /doLogin

Agar success â†’ /success

Agar fail â†’ /login?error=true

Agar unauthorized role â†’ /unauthorized

âœ… 6. Method-Level Security Annotations
ğŸ”¹ @Secured
@Secured("ROLE_ADMIN")


Checks before method call

Simple aur fast role check

âš ï¸ ROLE_ prefix required

ğŸ”¹ @PreAuthorize
@PreAuthorize("hasRole('ADMIN') or hasRole('MANAGER')")


Checks before method call

Supports SpEL (Spring Expression Language) â†’ complex conditions likh sakte ho

hasRole('ADMIN') internally = ROLE_ADMIN

ğŸ”¹ @PostAuthorize
@PostAuthorize("returnObject.owner == authentication.name or hasRole('ADMIN')")


Checks after method execution

Useful jab return value authorize karni ho

Keywords:

returnObject = return value

authentication.name = logged-in username

âœ… 7. Best Practices

Simple role check â†’ use @Secured

Complex multi-role / user-specific condition â†’ use @PreAuthorize

Return object based check â†’ use @PostAuthorize

Controller par â†’ API-level restriction

Service par â†’ business logic level restriction (more secure & reusable)